
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Usage Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-forkmegithub/plugin.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-prism/prism.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-anchors/plugin.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="../generate/model.md" />
    
    
    <link rel="prev" href="../generate/server.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Introduction
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.1.1" data-path="../about.html">
            
                <a href="../about.html">
            
                    
                    Approach
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../features.html">
            
                <a href="../features.html">
            
                    
                    Features
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" >
            
                <span>
            
                    
                    Tutorials
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="../tutorial/todo-list.html">
            
                <a href="../tutorial/todo-list.html">
            
                    
                    Simple Server
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="middleware.html">
            
                <a href="middleware.html">
            
                    
                    Middleware
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3" data-path="../tutorial/custom-server.html">
            
                <a href="../tutorial/custom-server.html">
            
                    
                    Custom Server
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.4" data-path="../tutorial/dynamic.html">
            
                <a href="../tutorial/dynamic.html">
            
                    
                    Dynamic Server
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" >
            
                <span>
            
                    
                    Use-Cases
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="../usage/serve_ui.html">
            
                <a href="../usage/serve_ui.html">
            
                    
                    Serve UI
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="../usage/validate.html">
            
                <a href="../usage/validate.html">
            
                    
                    Validate
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3" >
            
                <span>
            
                    
                    Generate
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.3.1" data-path="../generate/client.html">
            
                <a href="../generate/client.html">
            
                    
                    API Client
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.3.1.1" data-path="client.md">
            
                <span>
            
                    
                    Usage
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4.3.2" data-path="../generate/server.html">
            
                <a href="../generate/server.html">
            
                    
                    API Server
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter active" data-level="1.4.3.2.1" data-path="server.html">
            
                <a href="server.html">
            
                    
                    Usage
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4.3.3" data-path="../generate/model.md">
            
                <span>
            
                    
                    API Model
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.3.3.1" data-path="schemas.html">
            
                <a href="schemas.html">
            
                    
                    Model generation rules
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4.4" data-path="../generate/spec.html">
            
                <a href="../generate/spec.html">
            
                    
                    Spec from source
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.4.1" data-path="../generate/spec/meta.html">
            
                <a href="../generate/spec/meta.html">
            
                    
                    swagger:meta
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.4.2" data-path="../generate/spec/route.html">
            
                <a href="../generate/spec/route.html">
            
                    
                    swagger:route
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.4.3" data-path="../generate/spec/params.html">
            
                <a href="../generate/spec/params.html">
            
                    
                    swagger:params
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.4.4" data-path="../generate/spec/operation.html">
            
                <a href="../generate/spec/operation.html">
            
                    
                    swagger:operation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.4.5" data-path="../generate/spec/response.html">
            
                <a href="../generate/spec/response.html">
            
                    
                    swagger:response
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.4.6" data-path="../generate/spec/model.html">
            
                <a href="../generate/spec/model.html">
            
                    
                    swagger:model
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.4.7" data-path="../generate/spec/allOf.html">
            
                <a href="../generate/spec/allOf.html">
            
                    
                    swagger:allOf
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.4.8" data-path="../generate/spec/strfmt.html">
            
                <a href="../generate/spec/strfmt.html">
            
                    
                    swagger:strfmt
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.4.9" data-path="../generate/spec/discriminated.html">
            
                <a href="../generate/spec/discriminated.html">
            
                    
                    swagger:discriminated
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.4.10" data-path="../generate/spec/ignore.html">
            
                <a href="../generate/spec/ignore.html">
            
                    
                    swagger:ignore
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="template_layout.html">
            
                <a href="template_layout.html">
            
                    
                    Custom generation
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="../generate/templates.html">
            
                <a href="../generate/templates.html">
            
                    
                    Custom templates
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="../cli_helpers.html">
            
                <a href="../cli_helpers.html">
            
                    
                    CLI autocompletion
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="../faq/">
            
                <a href="../faq/">
            
                    
                    FAQ
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.1" data-path="../faq/faq_setup.html">
            
                <a href="../faq/faq_setup.html">
            
                    
                    Installation,setup and environment
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.2" data-path="../faq/faq_model.html">
            
                <a href="../faq/faq_model.html">
            
                    
                    Model generation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.3" data-path="../faq/faq_server.html">
            
                <a href="../faq/faq_server.html">
            
                    
                    Server generation & customization
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.4" data-path="../faq/faq_client.html">
            
                <a href="../faq/faq_client.html">
            
                    
                    Client generation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.5" data-path="../faq/faq_spec.html">
            
                <a href="../faq/faq_spec.html">
            
                    
                    Spec generation from source
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.6" data-path="../faq/faq_testing.html">
            
                <a href="../faq/faq_testing.html">
            
                    
                    API testing
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.7" data-path="../faq/faq_documenting.html">
            
                <a href="../faq/faq_documenting.html">
            
                    
                    Documenting your API
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >Usage</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="use-the-generated-server"><a name="use-the-generated-server" class="plugin-anchor" href="#use-the-generated-server"><i class="fa fa-link" aria-hidden="true"></i></a>Use the generated server</h1>
<p>The generated server serves the API but the default implementation returns 501 Not implemented for everything. Let&apos;s
look into using the generated code.</p>
<!--more-->
<p>Go swagger primarily deals with HTTP and originally only supports the stdlib <code>net/http</code> interface. A typical HTTP
request expects a response.  This is reflected in go-swagger where a handler is typically defined as a function of
input parameters to a responder.</p>
<pre><code class="lang-go"><span class="token keyword">type</span> ListTravelsHandler <span class="token keyword">interface</span> <span class="token operator">{</span>
    <span class="token function">Handle<span class="token punctuation">(</span></span>ListTravelsParams<span class="token operator">)</span> middleware<span class="token operator">.</span>Responder
<span class="token operator">}</span>
</code></pre>
<p>The signature of this handler is one of 2 possible variations. When a handler doesn&apos;t use authentication then a handler
interface consists out of input parameters and a responder.</p>
<pre><code class="lang-go"><span class="token keyword">type</span> AddOneAuthenticatedHandler <span class="token keyword">interface</span> <span class="token operator">{</span>
    <span class="token function">Handle<span class="token punctuation">(</span></span>AddOneParams<span class="token operator">,</span> <span class="token keyword">interface</span><span class="token operator">{</span><span class="token operator">}</span><span class="token operator">)</span> middleware<span class="token operator">.</span>Responder
<span class="token operator">}</span>
</code></pre>
<p>When a handler does use authentication then the second argument to the handler function represents the security
principal for your application. You can specify the type name for this principal at generation time by specifying the
-P or --principal flag.</p>
<pre><code>swagger generate server -P models.User
swagger generate client -P models.User
</code></pre><p>When you would execute the generate step with that parameter for the security principal then the
AddOneAuthenticatedHandler would look a bit like this:</p>
<pre><code class="lang-go"><span class="token keyword">type</span> AddOneAuthenticatedHandler <span class="token keyword">interface</span> <span class="token operator">{</span>
    <span class="token function">Handle<span class="token punctuation">(</span></span>AddOneParams<span class="token operator">,</span> <span class="token operator">*</span>models<span class="token operator">.</span>User<span class="token operator">)</span> middleware<span class="token operator">.</span>Responder
<span class="token operator">}</span>
</code></pre>
<h2 id="implement-handlers"><a name="implement-handlers" class="plugin-anchor" href="#implement-handlers"><i class="fa fa-link" aria-hidden="true"></i></a>Implement handlers</h2>
<p>A handler is an interface/contract that defines a statically typed representation of the input and output parameters of
an operation on your API.
The tool generates handlers that are stubbed with a NotImplemented response when you first generate the server.</p>
<h3 id="the-not-implemented-handler"><a name="the-not-implemented-handler" class="plugin-anchor" href="#the-not-implemented-handler"><i class="fa fa-link" aria-hidden="true"></i></a>The not implemented handler</h3>
<p>The not implemented handler is actually a not implemented responder, it returns a responder that will always respond
with status code 501 and a message that lets people know it&apos;s not the fault of the client that things don&apos;t work.</p>
<pre><code class="lang-go">middleware<span class="token operator">.</span><span class="token function">NotImplemented<span class="token punctuation">(</span></span><span class="token string">&quot;operation todos.AddOne has not yet been implemented&quot;</span><span class="token operator">)</span>
</code></pre>
<h3 id="your-own-code"><a name="your-own-code" class="plugin-anchor" href="#your-own-code"><i class="fa fa-link" aria-hidden="true"></i></a>Your own code</h3>
<p>Each HTTP request expects a response of some sort, this response might have no data but it&apos;s a response none the less.</p>
<p>Every incoming request is described as a bunch of input parameters which have been validated prior to calling the
handler. So whenever your code is executed, the input parameters are guaranteed to be valid according to what the
swagger specification prescribes.</p>
<p>All the input parameters have been validated, and the request has been authenticated should it have triggered
authentication.</p>
<p>You probably want to return something a bit more useful to the users of your API than a not implemented response.</p>
<p>A possible implementation of the <code>ListTravelsHandler</code> interface might look like this:</p>
<pre><code class="lang-go"><span class="token keyword">type</span> PublicListTravelsOK <span class="token keyword">struct</span> <span class="token operator">{</span>
  Body <span class="token operator">[</span><span class="token operator">]</span>models<span class="token operator">.</span>Travel
<span class="token operator">}</span>
<span class="token keyword">func</span> <span class="token operator">(</span>m <span class="token operator">*</span>PublicListTravelsOK<span class="token operator">)</span> <span class="token function">WriteResponse<span class="token punctuation">(</span></span>rw http<span class="token operator">.</span>ResponseWriter<span class="token operator">,</span> producer httpkit<span class="token operator">.</span>Producer<span class="token operator">)</span><span class="token operator">{</span>
  <span class="token comment" spellcheck="true">// generated code here</span>
<span class="token operator">}</span>

<span class="token keyword">type</span> PublicListTravelsError <span class="token keyword">struct</span> <span class="token operator">{</span>
  Body models<span class="token operator">.</span>Error
<span class="token operator">}</span>
<span class="token keyword">func</span> <span class="token operator">(</span>m <span class="token operator">*</span>PublicListTravelsOK<span class="token operator">)</span> <span class="token function">WriteResponse<span class="token punctuation">(</span></span>rw http<span class="token operator">.</span>ResponseWriter<span class="token operator">,</span> producer httpkit<span class="token operator">.</span>Producer<span class="token operator">)</span><span class="token operator">{</span>
  <span class="token comment" spellcheck="true">// generated code here</span>
<span class="token operator">}</span>

<span class="token keyword">type</span> PublicListTravelsHandler <span class="token keyword">struct</span> <span class="token operator">{</span>
  db <span class="token keyword">interface</span> <span class="token operator">{</span>
    <span class="token function">FetchTravels<span class="token punctuation">(</span></span><span class="token operator">*</span>PublicListTravelsParams<span class="token operator">)</span> <span class="token operator">(</span><span class="token operator">[</span><span class="token operator">]</span>models<span class="token operator">.</span>Travel<span class="token operator">,</span> <span class="token builtin">error</span><span class="token operator">)</span>
  <span class="token operator">}</span>
<span class="token operator">}</span>

<span class="token keyword">func</span> <span class="token operator">(</span>m <span class="token operator">*</span>PublicListTravelsHandler<span class="token operator">)</span> <span class="token function">Handle<span class="token punctuation">(</span></span>params ListTravelsParams<span class="token operator">)</span> middleware<span class="token operator">.</span>Responder <span class="token operator">{</span>
  travels<span class="token operator">,</span> err <span class="token operator">:=</span> m<span class="token operator">.</span>db<span class="token operator">.</span><span class="token function">FetchTravels<span class="token punctuation">(</span></span><span class="token operator">&amp;</span>params<span class="token operator">)</span>
  <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token operator">{</span>
    <span class="token keyword">return</span> <span class="token operator">&amp;</span>PublicListTravelsError<span class="token operator">{</span>Body<span class="token operator">:</span> models<span class="token operator">.</span>Error<span class="token operator">{</span>Message<span class="token operator">:</span> err<span class="token operator">.</span><span class="token function">Error<span class="token punctuation">(</span></span><span class="token operator">)</span><span class="token operator">}</span><span class="token operator">}</span>
  <span class="token operator">}</span>
  <span class="token keyword">return</span> <span class="token operator">&amp;</span>PublicListTravelsOK<span class="token operator">{</span>Body<span class="token operator">:</span> travels<span class="token operator">}</span>
<span class="token operator">}</span>
</code></pre>
<p>In the example above we have a handler implementation with a hypothetical database fetch interface. When the handle
method is executed there are 2 possible responses for the provided parameters. There can either be an error in which
case the PublicListTravelsError will be returned, otherwise the PublicListTravelsOK will be returned.</p>
<p>The code generator has written the remaining code to render that response with the headers etc.</p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="../generate/server.html" class="navigation navigation-prev " aria-label="Previous page: API Server">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="../generate/model.md" class="navigation navigation-next " aria-label="Next page: API Model">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Usage","level":"1.4.3.2.1","depth":4,"next":{"title":"API Model","level":"1.4.3.3","depth":3,"path":"generate/model.md","ref":"generate/model.md","articles":[{"title":"Model generation rules","level":"1.4.3.3.1","depth":4,"path":"use/schemas.md","ref":"use/schemas.md","articles":[]}]},"previous":{"title":"API Server","level":"1.4.3.2","depth":3,"path":"generate/server.md","ref":"generate/server.md","articles":[{"title":"Usage","level":"1.4.3.2.1","depth":4,"path":"use/server.md","ref":"use/server.md","articles":[]}]},"dir":"ltr"},"config":{"plugins":["forkmegithub","prism","-highlight","anchors"],"root":"./docs","styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"forkmegithub":{"color":"green","url":"https://github.com/go-swagger/go-swagger"},"prism":{},"anchors":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"gitbook":"*"},"file":{"path":"use/server.md","mtime":"2017-11-20T00:45:12.007Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2018-01-07T04:45:30.993Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-forkmegithub/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

