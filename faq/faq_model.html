
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Model generation Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-forkmegithub/plugin.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-prism/prism.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-anchors/plugin.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="faq_server.html" />
    
    
    <link rel="prev" href="faq_setup.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Introduction
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.1.1" data-path="../about.html">
            
                <a href="../about.html">
            
                    
                    Approaches
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.2" data-path="../install.html">
            
                <a href="../install.html">
            
                    
                    Installation
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../features.html">
            
                <a href="../features.html">
            
                    
                    Features
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" >
            
                <span>
            
                    
                    Tutorials
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="../tutorial/todo-list.html">
            
                <a href="../tutorial/todo-list.html">
            
                    
                    Simple Server
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="../use/middleware.html">
            
                <a href="../use/middleware.html">
            
                    
                    Middleware
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3" data-path="../tutorial/custom-server.html">
            
                <a href="../tutorial/custom-server.html">
            
                    
                    Custom Server
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.4" data-path="../tutorial/dynamic.html">
            
                <a href="../tutorial/dynamic.html">
            
                    
                    Dynamic Server
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.5" >
            
                <span>
            
                    
                    Security
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.5.1" data-path="../tutorial/authentication/">
            
                <a href="../tutorial/authentication/">
            
                    
                    Authentication
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.5.2" data-path="../tutorial/oauth2/">
            
                <a href="../tutorial/oauth2/">
            
                    
                    OAuth2
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.5.3" data-path="../tutorial/composed-auth/">
            
                <a href="../tutorial/composed-auth/">
            
                    
                    Composition
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" >
            
                <span>
            
                    
                    Use-Cases
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="../usage/swagger.html">
            
                <a href="../usage/swagger.html">
            
                    
                    Options and commands
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="../usage/serve_ui.html">
            
                <a href="../usage/serve_ui.html">
            
                    
                    Serve UI
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="../usage/validate.html">
            
                <a href="../usage/validate.html">
            
                    
                    Validate
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.4" >
            
                <span>
            
                    
                    Generate
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.4.1" data-path="../generate/requirements.html">
            
                <a href="../generate/requirements.html">
            
                    
                    Dependencies & Requirements
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.4.2" data-path="../generate/client.html">
            
                <a href="../generate/client.html">
            
                    
                    API Client
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.4.3" data-path="../generate/server.html">
            
                <a href="../generate/server.html">
            
                    
                    API Server
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.4.3.1" data-path="../use/server.html">
            
                <a href="../use/server.html">
            
                    
                    Usage
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4.4.4" data-path="../generate/model.html">
            
                <a href="../generate/model.html">
            
                    
                    API Model
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.4.4.1" data-path="../use/schemas.html">
            
                <a href="../use/schemas.html">
            
                    
                    Model generation rules
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4.5" data-path="../generate/spec.html">
            
                <a href="../generate/spec.html">
            
                    
                    Spec from source
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.5.1" data-path="../generate/spec/meta.html">
            
                <a href="../generate/spec/meta.html">
            
                    
                    swagger:meta
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5.2" data-path="../generate/spec/route.html">
            
                <a href="../generate/spec/route.html">
            
                    
                    swagger:route
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5.3" data-path="../generate/spec/params.html">
            
                <a href="../generate/spec/params.html">
            
                    
                    swagger:params
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5.4" data-path="../generate/spec/operation.html">
            
                <a href="../generate/spec/operation.html">
            
                    
                    swagger:operation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5.5" data-path="../generate/spec/response.html">
            
                <a href="../generate/spec/response.html">
            
                    
                    swagger:response
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5.6" data-path="../generate/spec/model.html">
            
                <a href="../generate/spec/model.html">
            
                    
                    swagger:model
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5.7" data-path="../generate/spec/allOf.html">
            
                <a href="../generate/spec/allOf.html">
            
                    
                    swagger:allOf
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5.8" data-path="../generate/spec/strfmt.html">
            
                <a href="../generate/spec/strfmt.html">
            
                    
                    swagger:strfmt
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5.9" data-path="../generate/spec/discriminated.html">
            
                <a href="../generate/spec/discriminated.html">
            
                    
                    swagger:discriminated
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5.10" data-path="../generate/spec/ignore.html">
            
                <a href="../generate/spec/ignore.html">
            
                    
                    swagger:ignore
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="../use/template_layout.html">
            
                <a href="../use/template_layout.html">
            
                    
                    Custom generation
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="../generate/templates.html">
            
                <a href="../generate/templates.html">
            
                    
                    Custom templates
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="../cli_helpers.html">
            
                <a href="../cli_helpers.html">
            
                    
                    CLI autocompletion
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="./">
            
                <a href="./">
            
                    
                    FAQ
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.1" data-path="faq_setup.html">
            
                <a href="faq_setup.html">
            
                    
                    Installation,setup and environment
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.7.2" data-path="faq_model.html">
            
                <a href="faq_model.html">
            
                    
                    Model generation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.3" data-path="faq_server.html">
            
                <a href="faq_server.html">
            
                    
                    Server generation & customization
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.4" data-path="faq_client.html">
            
                <a href="faq_client.html">
            
                    
                    Client generation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.5" data-path="faq_spec.html">
            
                <a href="faq_spec.html">
            
                    
                    Spec generation from source
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.6" data-path="faq_testing.html">
            
                <a href="faq_testing.html">
            
                    
                    API testing
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.7" data-path="faq_documenting.html">
            
                <a href="faq_documenting.html">
            
                    
                    Documenting your API
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >Model generation</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <!-- Questions about model generation -->
<h2 id="model-generation"><a name="model-generation" class="plugin-anchor" href="#model-generation"><i class="fa fa-link" aria-hidden="true"></i></a>Model generation</h2>
<h3 id="custom-validation"><a name="custom-validation" class="plugin-anchor" href="#custom-validation"><i class="fa fa-link" aria-hidden="true"></i></a>Custom validation</h3>
<p><em>Use-Case</em>: is it possible to write my own validation code for custom types? If so, can someone give me an example?</p>
<blockquote>
<p>Usage example:
There is bookstore, with info about books: author, title, price. 
And we want that books from some author will not cost more than some price.
So I want to write and use a function ValidateBookCustom() like:</p>
<pre class="language-"><code class="lang-golang">if book.author == &quot;Some author&quot; {
    if book.price &gt; 1000 {
       return false
   }
    else return true
}
</code></pre>
</blockquote>
<p><strong>Answer</strong>: there are several ways to achieve that.</p>
<ul>
<li>reusing customized models</li>
<li>reusing custom go types</li>
<li>customizing code generation</li>
</ul>
<p>You should know that models may be generated independently from server, then reused when generating a new server.</p>
<p>You might build on that: generating a first model, customizing the validation code, then reusing this model (possibly with some others) in your servers.</p>
<p>Another way is to use the <code>x-go-type extension</code>, to replace type generation with a custom type.</p>
<p>There is the opportunity to get go-swagger to reuse a predefined type to satisfy the definition in the swagger spec.
Imported package and type alias may be specified as options, as shown in this example: 
<a href="https://github.com/go-swagger/go-swagger/blob/master/fixtures/codegen/existing-model.yml#L84-L88" target="_blank">https://github.com/go-swagger/go-swagger/blob/master/fixtures/codegen/existing-model.yml#L84-L88</a></p>
<p>That example reuses a type provided by a library with a package alias and type name. The code generator will respect this.</p>
<p>You might use both, preparing a customized model from an initially generated structure, then reusing type custom type in other declarations by hinting the generator with x-go-type.</p>
<p>Further, for repetitive customization, you might be willing to customize the generator&apos;s templates. Like in <a href="https://github.com/go-swagger/go-swagger/blob/master/generator/templates/schemavalidator.gotmpl" target="_blank">here</a>
for models, or in <a href="https://github.com/go-swagger/go-swagger/blob/master/generator/templates/server/parameter.gotmpl" target="_blank">here</a> for inline parameters.</p>
<p>Originally from issues <a href="https://github.com/go-swagger/go-swagger/issues/997" target="_blank">#997</a> and <a href="https://github.com/go-swagger/go-swagger/issues/1334" target="_blank">#1334</a></p>
<h3 id="non-required-or-nullable-property"><a name="non-required-or-nullable-property" class="plugin-anchor" href="#non-required-or-nullable-property"><i class="fa fa-link" aria-hidden="true"></i></a>Non-required or nullable property?</h3>
<p><em>Use-Case</em>: when a definition has a property N, if N is a number and is not required,
the corresponding generated model has the struct flag <code>omitempty</code> for N.
This means that when N has been set to 0 the generated JSON omits N, despite it being validly set to 0.</p>
<p>I would still like to allow this variable to be unset, by setting it to null for example.
This will also apply for returning objects that return false and so on.</p>
<blockquote>
<p>The <code>&quot;omitempty&quot;</code> option specifies that the field should be omitted from the encoding if the field has an empty value,
defined as false, 0, a nil pointer, a nil interface value, and any empty array, slice, map, or string.
(from <a href="https://golang.org/pkg/encoding/json/#Marshal" target="_blank">https://golang.org/pkg/encoding/json/#Marshal</a>)</p>
</blockquote>
<p><strong>Hint</strong>: a workaround for this is to use the extension <strong>x-nullable:true</strong> on properties.</p>
<p>Originally from issue <a href="https://github.com/go-swagger/go-swagger/issues/959" target="_blank">#959</a>. (<em>more discussion on edge cases there</em>).</p>
<p>Related: <a href="https://github.com/go-openapi/validate/issues/19" target="_blank">go-openapi/validate#19</a>.</p>
<h3 id="string-parameter-in-body-and-query"><a name="string-parameter-in-body-and-query" class="plugin-anchor" href="#string-parameter-in-body-and-query"><i class="fa fa-link" aria-hidden="true"></i></a>String parameter in body and query</h3>
<p><em>Use-case</em>: I want to create an operation with string parameter in body, but go-swagger fails while generating.</p>
<p>When I change body to query, it works. How can I send my parameter in body with type string?</p>
<p>This <em>works</em> (param in query):</p>
<pre class="language-"><code class="lang-YAML">post:
  description: post func
  operationId: postfunc
  parameters:
    - name: myparam
      in: query
      type: string
</code></pre>
<p><strong>But this fails (param in body):</strong></p>
<pre class="language-"><code class="lang-YAML">post:
  description: post func
  operationId: postfunc
  parameters:
    - name: myparam
      in: body
      type: string
</code></pre>
<p><strong>Answer</strong>: add the schema definition in body. This works:</p>
<pre class="language-"><code class="lang-YAML">post:
  description: post func
  operationId: postfunc
  parameters:
    - name: myparam
      in: body
      required: true
      schema:
        type: string
</code></pre>
<p><strong>Hint</strong>: more generally, you might want to check the validity of your spec re the OpenAPI 2.0 schema before trying generation, using the <code>swagger validate {spec}</code> command.</p>
<p>Originally from issue <a href="https://github.com/go-swagger/go-swagger/issues/990" target="_blank">#990</a>.</p>
<h3 id="request-response-can-have-different-objects-returned-based-on-query-parameters"><a name="request-response-can-have-different-objects-returned-based-on-query-parameters" class="plugin-anchor" href="#request-response-can-have-different-objects-returned-based-on-query-parameters"><i class="fa fa-link" aria-hidden="true"></i></a>Request response can have different objects returned based on query parameters</h3>
<p><em>Use-Case</em>: I have a POST request that returns different object models based on the query parameters.</p>
<p><em>Is there any way to add multiple responses under the swagger route annotation?</em></p>
<p>Like:</p>
<pre class="language-"><code class="lang-YAML">Responses:
  200: response1
  200: response2
  ... etc
</code></pre>
<p><em>Also is it possible to have different models for the request?</em></p>
<p><strong>Answer</strong>: <strong>No</strong>, as this is not supported in Openapi 2.0 specification</p>
<p>That being said, if you specify a wrapper class or base class, you can return multiple responses.</p>
<p>For example (in pseudo-swagger):</p>
<pre class="language-"><code class="lang-YAML">ResponseWrapper:
  type: object
  properties:
    response1:
      $ref: &apos;#/definitions/response1&apos;
    response2:
      $ref: &apos;#/definitions/response2&apos;
</code></pre>
<p>or perhaps more elegantly:</p>
<pre class="language-"><code class="lang-YAML">BaseObject:
  type: object
  properties:
    id:
      type: string
      format: uuid

Response1:
  allOf:
    - $ref: &apos;#/definitions/BaseObject&apos;
    - type: object
      properties:
        extendedAttributeForResponse1

Response2:
  allOf:
    - $ref: &apos;#/definitions/BaseObject&apos;
    - type: object
       properties:
         extendedAttribForResponse2
</code></pre>
<p>Allegedly, with OpenAPI 3.0 you&apos;ll be able to use the <code>anyOf:</code> operator, with the different response types.</p>
<p>Regarding parameters, you may also achieve this by putting in the path the query parameters that dictate the model.</p>
<pre class="language-"><code class="lang-YAML">paths:
  &quot;/something?objectType=thisThing&quot;:
      get:
...
  &quot;/something?objectType=otherThing&quot;:
      get:
...
</code></pre>
<p>Originally from issue <a href="https://github.com/go-swagger/go-swagger/issues/932" target="_blank">#932</a>.</p>
<h3 id="how-to-validate-dates-and-times"><a name="how-to-validate-dates-and-times" class="plugin-anchor" href="#how-to-validate-dates-and-times"><i class="fa fa-link" aria-hidden="true"></i></a>How to validate dates and times?</h3>
<p>JSON schema and Swagger (aka OpenAPI 2.0) define ISO-8601 dates as a known format (e.g. date-time, or <code>yyyy-MM-dd&apos;T&apos;HH:mm:ss.SSS&apos;Z</code>).</p>
<p>This format definition is used by go-swagger validators.
You just have to define the format as in:</p>
<pre class="language-"><code class="lang-JSON">{
  &quot;description&quot;: &quot;The date and time that the device was registered.&quot;,
  &quot;type&quot;:&quot;string&quot;,
  &quot;format&quot;: &quot;date-time&quot;
}
</code></pre>
<p>The <code>go-openapi/strfmt</code> package supports many additional string formats for validation.</p>
<p>Check out for more in <a href="../generate/spec/strfmt.html">this document</a>.
Regarding dates, this package extends validation to <a href="https://tools.ietf.org/html/rfc3339" target="_blank">RFC3339</a> full-date format (e.g. &quot;2006-01-02&quot;).</p>
<p>Originally from issue <a href="https://github.com/go-swagger/go-swagger/issues/643" target="_blank">#643</a>.</p>
<h3 id="accessing-the-default-return-value"><a name="accessing-the-default-return-value" class="plugin-anchor" href="#accessing-the-default-return-value"><i class="fa fa-link" aria-hidden="true"></i></a>Accessing the Default return value</h3>
<p><em>Use-Case</em>: I was wondering how I would get the default response from the client?</p>
<p>Note: see also <a href="https://github.com/go-swagger/go-swagger/issues/597" target="_blank">Access HTTP status code from client#597</a>. </p>
<p>I have a spec like this:</p>
<pre class="language-"><code class="lang-YAML">/deploys/{deploy_id}:
  get:
    operationId: getDeploy
    parameters:
      - name: deploy_id
        type: string
        in: path
        required: true
    responses:
      &apos;200&apos;:
        description: OK
        schema:
          $ref: &quot;#/definitions/deploy&quot;
      default:
        description: error
        schema:
          $ref: &quot;#/definitions/error&quot;
</code></pre>
<p>This spec generates two models: <code>GetDeployOK</code> and <code>GetDeployDefault</code>. The API generated will return the OK case.</p>
<pre class="language-"><code class="lang-golang">func (a *Client) GetDeploy(params *GetDeployParams, authInfo runtime.ClientAuthInfoWriter) (*GetDeployOK, error) {
    // TODO: Validate the params before sending
    if params == nil {
        params = NewGetDeployParams()
    }

    result, err := a.transport.Submit(&amp;runtime.ClientOperation{
        ID: &quot;getDeploy&quot;,
        Method: &quot;GET&quot;,
        PathPattern: &quot;/deploys/{deploy_id}&quot;,
        ProducesMediaTypes: []string{&quot;application/json&quot;},
        ConsumesMediaTypes: []string{&quot;application/json&quot;},
        Schemes: []string{&quot;https&quot;},
        Params: params,
        Reader: &amp;GetDeployReader{formats: a.formats},
        AuthInfo: authInfo,
    })
    if err != nil {
        return nil, err
    }
    return result.(*GetDeployOK), nil  TODO
}
</code></pre>
<p><em>Does that mean that, if I get a non-2xx response, I should check the err to actually be a <code>GetDeployDefault</code> reference?</em></p>
<p>Something like:</p>
<pre class="language-"><code class="lang-golang">resp, err := c.Operations.GetDeploy(&amp;params, authInfo)
if err != nil {
    if casted, ok := err.(models.GetDeployDefault); ok {
        // do something here....
    } else {
        false, err
    }
}
</code></pre>
<blockquote>
<p>I&apos;ve been tracing through the code in <code>Runtime.Submit</code>: it delegates to the <code>GetDeployReader.ReadResponse</code> which makes the distinction.
However, it remains unclear how that response is actually surfaced.</p>
</blockquote>
<p><strong>Answer</strong>: you can get pretty close to that with something like:</p>
<pre class="language-"><code class="lang-golang">casted, ok := err.(*operations.GetDeployDefault)
</code></pre>
<p>Because it&apos;s a struct type it will be a pointer.</p>
<p>Originally from issue <a href="https://github.com/go-swagger/go-swagger/issues/616" target="_blank">#616</a>.</p>
<h3 id="how-to-avoid-deep-copies-of-complex-data-structures-that-need-to-be-marshalled-across-the-api"><a name="how-to-avoid-deep-copies-of-complex-data-structures-that-need-to-be-marshalled-across-the-api" class="plugin-anchor" href="#how-to-avoid-deep-copies-of-complex-data-structures-that-need-to-be-marshalled-across-the-api"><i class="fa fa-link" aria-hidden="true"></i></a>How to avoid deep copies of complex data structures that need to be marshalled across the API?</h3>
<p><em>Use-Case</em>:</p>
<blockquote>
<p>An API that provides access to a complex data structure, defined and governed by a subsystem, should not have to spec the
same data model to be marshalled, as this would require a deep copy of the data structure from the subsystem to the API layer&apos;s
model universe.</p>
</blockquote>
<p><em>How do others deal with this problem?</em></p>
<ul>
<li>If your question is &quot;How do I write arbitrary response bodies from go-swagger generated server code?&quot; 
(e.g. from subsystem structs that you have marshalled) then you may want to write your own <code>middleware.Responder</code>,
which gives you direct access to the underlying <code>http.ResponseWriter</code>.
At this point, though, why use go-swagger instead  of a lighter-weight framework?</li>
<li>If your question is &quot;how can I generate a swagger spec from my subsystem structs?&quot;, then you could check out the <code>swagger generate
spec</code> CLI command.</li>
</ul>
<blockquote>
<p>Further, a subsystem that builds a complex hierarchical data structure to support its own requirements for efficiency,
access, and serialization does not want the types of the API data model to be injected into its namespace.</p>
<p>Eventually, the subsystem can exist in many different contexts beyond the API, which is another reason it should not
become dependent on any API type.</p>
</blockquote>
<hr>
<p><em>Similar Use-Case</em>:</p>
<blockquote>
<p>A new requirement is proposed that wants API access to that complex data structure, and we decide to use go-swagger for that
implementation. It is a pure &apos;read&apos; requirement, so no need for parameter validation by the API, just the ability to gain an XML
or JSON form of the data structure by a client.</p>
<p>Our organization decided to keep the API and subsystem layers separate, and to perform deep copies between them.
The runtime performance costs are acceptable to us, and worth it to keep API-layer dependencies out of our core library.
If someone can think of a better solution we would love to know!</p>
<p>If we define a data model in the swagger specification, we end up having to do a
deep copy of that data structure from subsystem to API if we want to avoid type injection.</p>
</blockquote>
<p><em>How do you use the swagger spec to define a raw JSON or XML transfer, defined by the subsystem&apos;s types?</em></p>
<p><strong>Hint</strong>: you may use the <code>x-go-type</code> model annotation that allows you to use pre-existing types as models, you annotate your spec like this:
<a href="https://github.com/go-swagger/go-swagger/blob/master/fixtures/codegen/existing-model.yml#L84-L88" target="_blank">https://github.com/go-swagger/go-swagger/blob/master/fixtures/codegen/existing-model.yml#L84-L88</a></p>
<p>Originally from issue <a href="https://github.com/go-swagger/go-swagger/issues/948" target="_blank">#948</a>.</p>
<hr>
<p>Back to <a href="./#all-contributed-questions">all contributions</a></p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="faq_setup.html" class="navigation navigation-prev " aria-label="Previous page: Installation,setup and environment">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="faq_server.html" class="navigation navigation-next " aria-label="Next page: Server generation & customization">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Model generation","level":"1.7.2","depth":2,"next":{"title":"Server generation & customization","level":"1.7.3","depth":2,"path":"faq/faq_server.md","ref":"faq/faq_server.md","articles":[]},"previous":{"title":"Installation,setup and environment","level":"1.7.1","depth":2,"path":"faq/faq_setup.md","ref":"faq/faq_setup.md","articles":[]},"dir":"ltr"},"config":{"plugins":["forkmegithub","prism","-highlight","anchors"],"root":"./docs","styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"forkmegithub":{"color":"green","url":"https://github.com/go-swagger/go-swagger"},"prism":{},"anchors":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"gitbook":"*"},"file":{"path":"faq/faq_model.md","mtime":"2018-05-29T07:28:21.737Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2018-05-29T07:35:54.742Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-forkmegithub/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

